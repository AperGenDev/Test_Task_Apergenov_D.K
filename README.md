# Test_Task_Apergenov_D.K

Проект реализует ETL-пайплайн для выгрузки данных прогнозов погоды.
Данные загружаются из API в csv файл и PostgreSQL.

## Структура проекта
```
weather_project/
├── data/                   
│   └── MyWeather.csv             # Итоговый CSV-файл
├── scripts/                 
│   ├── main.py                   # Python-скрипты
│   ├── init.sql                  # Инициализация БД
├── docker-compose.yml            # Конфигурация контейнеров
```
## Запуск проекта
1. Поднять контейнеры
```
docker-compose up -d
```
2. Запустить основной скрипт
```
python .\scripts\main.py
```
3. Проверить логи
```
docker-compose logs -f postgres
```
## Проверка результатов
1. Просмотр результатов в MyWeather.csv
```
type data\MyWeather.csv
```
2. Просмотр результатов в Postgres
```
docker-compose exec postgres psql -U weather_user -d weather_db -c "SELECT * FROM weather_data;"
```
## Описание ETL-процессов
1. Extract (Извлечение)
  - Получение данных о погоде через API Open-Meteo
  - Поддержка двух режимов:
    - Ручной ввод дат (interval_date())
    - Фиксированный диапазон (по умолчанию)
  - Формат данных: JSON с почасовыми и дневными метеопоказателями
2. Transform (Трансформация)
  - Конвертация единиц измерения:
    - Температура: °F → °C
    - Скорость ветра: узлы → м/с
    - Осадки: дюймы → мм
  - Расчет производных показателей:
    - Средние/суммарные значения для дневного времени
    - Продолжительность светового дня
  - Агрегация данных по дням
  - Объединение таблиц (почасовые + дневные данные)
3. Load (Загрузка)
  - Сохранение результатов:
    - В CSV-файл (указанный путь)
    - В PostgreSQL (таблица weather_data)
  - Режим добавления данных (if_exists='append')
## Технологии
- Python (язык программирования)
- Pandas (обработка и трансформация данных)
- SQLAlchemy (работа с БД через ORM)
- PostgreSQL (реляционная СУБД)
- Docker (контейнеризация сервисов)
